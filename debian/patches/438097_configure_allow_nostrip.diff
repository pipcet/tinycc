From: Arthur Loiret <arthur.loiret@gmail.com>
Date: Sat, 13 Mar 2010 18:11:06 +0100
Subject: Package support nostrip flag at build

Make the build process support the nostrip flag in DEB_BUILD_OPTIONS.

Origin: vendor
Bug-Debian: http://bugs.debian.org/438097
Forwarded: not-needed
Last-Update: 2010-04-20
---
 Makefile  |    2 +-
 configure |    3 ---
 2 files changed, 1 insertions(+), 4 deletions(-)

diff --git a/Makefile b/Makefile
index 5af111e..53afb0b 100644
--- a/Makefile
+++ b/Makefile
@@ -202,7 +202,7 @@ INSTALL=install
 ifndef CONFIG_WIN32
 install: $(PROGS) $(LIBTCC1) $(BCHECK_O) libtcc.a tcc.1 tcc-doc.html
 	mkdir -p "$(bindir)"
-	$(INSTALL) -s -m755 $(PROGS) "$(bindir)"
+	$(INSTALL) -m755 $(PROGS) "$(bindir)"
 	mkdir -p "$(mandir)/man1"
 	$(INSTALL) tcc.1 "$(mandir)/man1"
 	mkdir -p "$(tccdir)"
diff --git a/configure b/configure
index 7be7760..89c7ead 100755
--- a/configure
+++ b/configure
@@ -32,7 +32,6 @@ cross_prefix=""
 cc="gcc"
 host_cc="gcc"
 ar="ar"
-strip="strip"
 cpu=`uname -m`
 case "$cpu" in
   i386|i486|i586|i686|i86pc|BePC|i686-AT386)
@@ -140,7 +139,6 @@ fi
 
 cc="${cross_prefix}${cc}"
 ar="${cross_prefix}${ar}"
-strip="${cross_prefix}${strip}"
 
 if test "$mingw32" = "yes" ; then
     LIBSUF=".lib"
@@ -302,7 +300,6 @@ echo "GCC_MAJOR=$gcc_major" >> config.mak
 echo "#define GCC_MAJOR $gcc_major" >> $TMPH
 echo "HOST_CC=$host_cc" >> config.mak
 echo "AR=$ar" >> config.mak
-echo "STRIP=$strip -s -R .comment -R .note" >> config.mak
 echo "CFLAGS=$CFLAGS" >> config.mak
 echo "LDFLAGS=$LDFLAGS" >> config.mak
 echo "LIBSUF=$LIBSUF" >> config.mak
-- 
