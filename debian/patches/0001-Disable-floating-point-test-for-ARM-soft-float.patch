From 2b9351a0c159c401a3bb71069a86f96e8b1e501e Mon Sep 17 00:00:00 2001
From: Matteo Cypriani <mcy@lm7.fr>
Date: Fri, 5 Sep 2014 23:22:56 -0400
Subject: Disable floating-point test for ARM soft-float

tcc is not yet capable of doing softfloat floating-point operations on
ARM, therefore we disable this test for these platforms. Note that tcc
displays a warning to warn ARM users about this limitation.

Origin: vendor
Forwarded: no
Last-Update: 2014-09-05
---
 tests/tests2/Makefile | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

diff --git a/tests/tests2/Makefile b/tests/tests2/Makefile
index 66d2f5a..1068105 100644
--- a/tests/tests2/Makefile
+++ b/tests/tests2/Makefile
@@ -41,8 +41,17 @@ TESTS =	\
  18_include.test \
  19_pointer_arithmetic.test \
  20_pointer_comparison.test \
- 21_char_array.test \
- 22_floating_point.test \
+ 21_char_array.test
+
+ifeq ($(findstring -DTCC_ARM_EABI,$(NATIVE_DEFINES)),)
+	TESTS += 22_floating_point.test
+else
+	ifneq ($(findstring -DTCC_ARM_HARDFLOAT,$(NATIVE_DEFINES)),)
+		TESTS += 22_floating_point.test
+	endif
+endif
+
+TESTS += \
  23_type_coercion.test \
  24_math_library.test \
  25_quicksort.test \
