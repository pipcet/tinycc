  * Add support for kfreebsd-i386, with thanks to Pierre Chifflier
    <chifflier@cpe.fr> (closes: #372908).
Index: tcc-0.9.24~cvs20070502.orig/tcc.c
===================================================================
--- tcc-0.9.24~cvs20070502.orig.orig/tcc.c	2007-05-03 03:55:36.673388531 +0200
+++ tcc-0.9.24~cvs20070502.orig/tcc.c	2007-05-03 03:55:41.170636931 +0200
@@ -754,8 +754,8 @@
   #define strtof (float)strtod
   #define strtoll (long long)strtol
 #endif
-#elif defined(TCC_UCLIBC) || defined(__FreeBSD__) || defined(__DragonFly__) \
-    || defined(__OpenBSD__)
+#elif defined(TCC_UCLIBC) || defined(__FreeBSD__) || defined(__FreeBSD_kernel__) \
+    || defined(__DragonFly__) || defined(__OpenBSD__)
 /* currently incorrect */
 long double strtold(const char *nptr, char **endptr)
 {
@@ -9869,7 +9869,7 @@
     int i;
 
     if (level == 0) {
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
         *paddr = uc->uc_mcontext.mc_eip;
 #elif defined(__dietlibc__)
         *paddr = uc->uc_mcontext.eip;
@@ -9878,7 +9878,7 @@
 #endif
         return 0;
     } else {
-#if defined(__FreeBSD__) 
+#if defined(__FreeBSD__)  || defined(__FreeBSD_kernel__)
         fp = uc->uc_mcontext.mc_ebp;
 #elif defined(__dietlibc__)
         fp = uc->uc_mcontext.ebp;
