From 073c697537a78da2b8cdbb4a0ff84dcce250ba24 Mon Sep 17 00:00:00 2001
From: Thomas Preud'homme <robotux@celest.fr>
Date: Wed, 13 Jun 2012 18:28:24 +0200
Subject: Detect multiarch on Kfreebsd and Hurd

Origin: upstream, commit: b0ebcfa7bae4a8743698107a82fffc598818ccc5
Forwarded: http://repo.or.cz/w/tinycc.git/commit/b0ebcfa7bae4a8743698107a82fffc598818ccc5
Last-Updated: 2012-06-13
Applied-Upstream: commit: b0ebcfa7bae4a8743698107a82fffc598818ccc5
---
 Makefile |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/Makefile b/Makefile
index 3b6acdd..ba94577 100644
--- a/Makefile
+++ b/Makefile
@@ -40,6 +40,8 @@ endif
 ifeq ($(ARCH),i386)
 NATIVE_DEFINES=-DTCC_TARGET_I386 
 NATIVE_DEFINES+=$(if $(wildcard /lib/i386-linux-gnu),-DCONFIG_MULTIARCHDIR=\"i386-linux-gnu\")
+NATIVE_DEFINES+=$(if $(wildcard /lib/i386-kfreebsd-gnu),-DCONFIG_MULTIARCHDIR=\"i386-kfreebsd-gnu\")
+NATIVE_DEFINES+=$(if $(wildcard /lib/i386-gnu),-DCONFIG_MULTIARCHDIR=\"i386-gnu\")
 CFLAGS+=-m32
 else
 ifeq ($(ARCH),x86-64)
@@ -47,6 +49,7 @@ NATIVE_DEFINES=-DTCC_TARGET_X86_64
 CFLAGS+=-m64
 NATIVE_DEFINES+=$(if $(wildcard /usr/lib64),-DCONFIG_LDDIR=\"lib64\")
 NATIVE_DEFINES+=$(if $(wildcard /lib/x86_64-linux-gnu),-DCONFIG_MULTIARCHDIR=\"x86_64-linux-gnu\")
+NATIVE_DEFINES+=$(if $(wildcard /lib/x86_64-kfreebsd-gnu),-DCONFIG_MULTIARCHDIR=\"x86_64-kfreebsd-gnu\")
 endif
 endif
 
